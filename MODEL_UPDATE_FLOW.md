# æ¨¡å‹æ›´æ–°æµç¨‹è¯¦è§£

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜æ¨èæ¨¡å‹å¦‚ä½•æ›´æ–°ï¼Œä»¥åŠæ•´ä¸ªæ•°æ®æµè½¬è¿‡ç¨‹ã€‚

## ğŸ”„ å®Œæ•´çš„æ¨¡å‹æ›´æ–°æµç¨‹

### æ–¹å¼1ï¼šå®æ—¶æ¨¡å¼ï¼ˆå¼€å‘/æµ‹è¯•ï¼‰

```
ç”¨æˆ·è¯„åˆ†äº‹ä»¶
    â†“
Kafka â†’ Consumer â†’ SQLite
    â†“
FeatureExtractor.build_user_item_matrix()
    â†“
æ„å»ºè¯„åˆ†çŸ©é˜µï¼ˆå†…å­˜ï¼‰
    â†“
HybridRecommender(rating_matrix)
    â†“
API /recommend â†’ è¿”å›æ¨è

é—®é¢˜ï¼šæ¯æ¬¡APIå¯åŠ¨éƒ½è¦é‡æ–°æ„å»ºçŸ©é˜µï¼Œé€Ÿåº¦æ…¢
é€‚ç”¨ï¼šå¼€å‘ç¯å¢ƒï¼Œæ•°æ®é‡å°
```

### æ–¹å¼2ï¼šæ‰¹å¤„ç†æ¨¡å¼ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰â­

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é˜¶æ®µ1: æ•°æ®æ”¶é›†ï¼ˆå®æ—¶ï¼‰                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç”¨æˆ·è¯„åˆ†äº‹ä»¶ 
  â†’ Kafka 
  â†’ Consumer 
  â†’ S3 Bronzeå±‚ (åŸå§‹JSON)
  
æ³¨æ„ï¼šæ­¤æ—¶æ¨èä¸ä¼šæ”¹å˜ï¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é˜¶æ®µ2: æ‰¹å¤„ç†è®­ç»ƒï¼ˆæ¯å¤©å‡Œæ™¨2ç‚¹ï¼‰           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Airflow DAG è§¦å‘
  â†“
Task 1: validate_data()
  â””â”€ éªŒè¯S3 Bronzeå±‚æ•°æ®è´¨é‡
  
  â†“
Task 2: extract_features_batch()
  â””â”€ ä»S3è¯»å–æ‰€æœ‰è¯„åˆ†
  â””â”€ æ‰¹é‡è®¡ç®—ç”¨æˆ·/ç”µå½±ç‰¹å¾
  â””â”€ æ›´æ–°DynamoDBï¼ˆå®æ—¶æŸ¥è¯¢ç”¨ï¼‰
  â””â”€ æ›´æ–°S3 Silverå±‚ï¼ˆParquetï¼Œåˆ†æç”¨ï¼‰
  
  â†“
Task 3: train_hybrid_model()  â† å…³é”®ï¼
  â””â”€ è¯»å–æ‰€æœ‰è¯„åˆ†æ„å»ºè¯„åˆ†çŸ©é˜µ
  â””â”€ è®­ç»ƒååŒè¿‡æ»¤æ¨¡å‹
  â””â”€ è®­ç»ƒåŸºäºå†…å®¹çš„æ¨¡å‹
  â””â”€ ä¿å­˜æ¨¡å‹åˆ°æ–‡ä»¶
      â””â”€ models/saved_models/hybrid_model_20250315_020000.pkl
  
  â†“
Task 4: evaluate_model()
  â””â”€ è¯„ä¼°æ¨¡å‹è¦†ç›–ç‡ã€å¤šæ ·æ€§ç­‰æŒ‡æ ‡
  â””â”€ å†³å®šæ˜¯å¦éƒ¨ç½²
  
  â†“
Task 5: deploy_model()  â† å…³é”®ï¼
  â””â”€ å¤åˆ¶æ–°æ¨¡å‹ä¸ºç”Ÿäº§æ¨¡å‹
      â””â”€ models/saved_models/production_model.pkl
  
  â†“
Task 6: reload_api()  â† å…³é”®ï¼
  â””â”€ è°ƒç”¨ POST /reload ç«¯ç‚¹
  â””â”€ APIé‡æ–°åŠ è½½ production_model.pkl
  â””â”€ æ¨èç³»ç»Ÿç°åœ¨ä½¿ç”¨æ–°æ¨¡å‹

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é˜¶æ®µ3: æœåŠ¡æ¨èï¼ˆä½¿ç”¨æ–°æ¨¡å‹ï¼‰              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç”¨æˆ·è¯·æ±‚ GET /recommend/123
  â†“
API.recommend()
  â†“
ä½¿ç”¨å†…å­˜ä¸­çš„ recommenderï¼ˆå·²æ›´æ–°ï¼‰
  â””â”€ rating_matrixï¼ˆæ–°æ•°æ®ï¼‰
  â””â”€ ç›¸ä¼¼åº¦çŸ©é˜µï¼ˆé‡æ–°è®¡ç®—ï¼‰
  â†“
è¿”å›æ–°çš„æ¨èç»“æœ
```

## ğŸ“ å…³é”®æ–‡ä»¶å’Œä»£ç 

### 1. Airflow DAGå®šä¹‰

**æ–‡ä»¶**: `airflow_dags/daily_model_retraining.py`

```python
# å®šä¹‰ä»»åŠ¡ä¾èµ–
validate_data_task >> extract_features_task >> train_model_task 
  >> evaluate_model_task >> deploy_model_task >> reload_api_task
```

### 2. æ¨¡å‹è®­ç»ƒé€»è¾‘

**æ–‡ä»¶**: `model_training/train_model.py`

**æ ¸å¿ƒå‡½æ•°**:

```python
def train_hybrid_model(**context):
    """
    è¿™é‡Œæ˜¯æ¨¡å‹è®­ç»ƒçš„æ ¸å¿ƒï¼
    """
    # 1. æ„å»ºè¯„åˆ†çŸ©é˜µ
    rating_matrix = feature_extractor.build_user_item_matrix()
    # å½¢çŠ¶: (10000ç”¨æˆ· x 5000ç”µå½±)
    
    # 2. è®­ç»ƒæ¨¡å‹
    model = HybridRecommender(rating_matrix, config)
    # å†…éƒ¨ä¼šï¼š
    #   - è®¡ç®—ç”¨æˆ·ç›¸ä¼¼åº¦çŸ©é˜µ
    #   - è®¡ç®—ç”µå½±ç›¸ä¼¼åº¦çŸ©é˜µ
    #   - é¢„è®¡ç®—å„ç§ä¸­é—´ç»“æœ
    
    # 3. ä¿å­˜æ¨¡å‹åˆ°æ–‡ä»¶
    with open(model_path, 'wb') as f:
        pickle.dump({
            'model': model,
            'rating_matrix': rating_matrix,
            'user_id_to_idx': user_id_to_idx,
            'movie_id_to_idx': movie_id_to_idx,
            'config': config,
            'timestamp': timestamp
        }, f)
    
    # æ¨¡å‹æ–‡ä»¶åŒ…å«ï¼š
    # - å®Œæ•´çš„è¯„åˆ†çŸ©é˜µ
    # - æ‰€æœ‰é¢„è®¡ç®—çš„ç›¸ä¼¼åº¦
    # - æ¨¡å‹é…ç½®å‚æ•°
    
    return model_path
```

### 3. æ¨¡å‹éƒ¨ç½²é€»è¾‘

**æ–‡ä»¶**: `model_training/train_model.py`

```python
def deploy_model(**context):
    """
    å°†è®­ç»ƒå¥½çš„æ¨¡å‹éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
    """
    # è·å–åˆšè®­ç»ƒçš„æ¨¡å‹è·¯å¾„
    model_path = 'models/saved_models/hybrid_model_20250315_020000.pkl'
    
    # å¤åˆ¶ä¸ºç”Ÿäº§æ¨¡å‹
    production_model_path = 'models/saved_models/production_model.pkl'
    shutil.copy(model_path, production_model_path)
    
    # ç°åœ¨APIå¯ä»¥åŠ è½½è¿™ä¸ªæ–‡ä»¶äº†ï¼
```

### 4. APIæ¨¡å‹åŠ è½½é€»è¾‘

**æ–‡ä»¶**: `api/main.py`

```python
def initialize_recommender():
    """
    APIå¯åŠ¨æ—¶æˆ–æ”¶åˆ°/reloadè¯·æ±‚æ—¶è°ƒç”¨
    """
    production_model_path = 'models/saved_models/production_model.pkl'
    
    if os.path.exists(production_model_path):
        # ä»æ–‡ä»¶åŠ è½½é¢„è®­ç»ƒæ¨¡å‹ï¼ˆå¿«é€Ÿï¼‰
        with open(production_model_path, 'rb') as f:
            model_data = pickle.load(f)
        
        recommender = model_data['model']  # å…¨å±€å˜é‡
        rating_matrix = model_data['rating_matrix']
        
        # ç°åœ¨recommenderå·²ç»æ˜¯æ–°æ¨¡å‹äº†ï¼
        # åŒ…å«æœ€æ–°çš„æ•°æ®å’Œç›¸ä¼¼åº¦è®¡ç®—
    else:
        # ä»æ•°æ®åº“å®æ—¶æ„å»ºï¼ˆæ…¢ï¼Œä»…ç”¨äºå¼€å‘ï¼‰
        rating_matrix = feature_extractor.build_user_item_matrix()
        recommender = HybridRecommender(rating_matrix, config)
```

### 5. æ¨èç”Ÿæˆé€»è¾‘

**æ–‡ä»¶**: `api/main.py` å’Œ `models/hybrid_model.py`

```python
@app.get("/recommend/{user_id}")
async def recommend(user_id: int):
    # ä½¿ç”¨å…¨å±€çš„recommenderå¯¹è±¡
    recommended_movies = recommender.recommend(user_id)
    # â†‘ è¿™ä¸ªrecommenderå°±æ˜¯/reloadæ›´æ–°çš„é‚£ä¸ªå¯¹è±¡
    
    return ",".join(map(str, recommended_movies))
```

## ğŸ” è¯¦ç»†ä»£ç è°ƒç”¨é“¾

### ç”¨æˆ·è¯„åˆ† â†’ å­˜å‚¨ï¼ˆä¸å½±å“æ¨èï¼‰

```
1. ç”¨æˆ·è¯„åˆ†
   kafka_consumer/consumer.py:process_event()
   
2. ä¿å­˜åˆ°Bronzeå±‚
   data_processor/s3_storage.py:save_raw_event()
   â†’ s3://bucket/bronze/user-events/date=2025-03-15/event_xxx.json
   
3. æ›´æ–°ç‰¹å¾ï¼ˆç»Ÿè®¡ç”¨ï¼‰
   data_processor/dynamodb_storage.py:update_user_feature()
   â†’ DynamoDBè¡¨
   
   data_processor/s3_storage.py:save_user_features_silver()
   â†’ s3://bucket/silver/user-features/user_123.parquet

æ³¨æ„ï¼šæ­¤æ—¶APIçš„æ¨èä¸ä¼šæ”¹å˜ï¼
å› ä¸ºrecommenderå¯¹è±¡è¿˜æ˜¯æ—§çš„ã€‚
```

### Airflowè®­ç»ƒ â†’ æ›´æ–°æ¨è

```
1. Airflowè§¦å‘ï¼ˆæ¯å¤©å‡Œæ™¨2ç‚¹ï¼‰
   airflow_dags/daily_model_retraining.py
   
2. è®­ç»ƒæ–°æ¨¡å‹
   model_training/train_model.py:train_hybrid_model()
   â”œâ”€ è¯»å–æ‰€æœ‰è¯„åˆ†
   â”œâ”€ æ„å»ºrating_matrix
   â”œâ”€ è®­ç»ƒHybridRecommender
   â””â”€ ä¿å­˜åˆ°models/saved_models/hybrid_model_20250315.pkl
   
3. éƒ¨ç½²æ¨¡å‹
   model_training/train_model.py:deploy_model()
   â””â”€ å¤åˆ¶ä¸ºproduction_model.pkl
   
4. é€šçŸ¥APIé‡æ–°åŠ è½½
   HTTP POST /reload
   
5. APIé‡æ–°åŠ è½½
   api/main.py:reload_model()
   â””â”€ initialize_recommender()
      â””â”€ åŠ è½½production_model.pkl
         â””â”€ æ›´æ–°å…¨å±€recommenderå¯¹è±¡ â† å…³é”®ï¼
         
6. ç°åœ¨æ¨èå·²æ›´æ–°
   GET /recommend/123 â†’ ä½¿ç”¨æ–°çš„recommender
```

## ğŸ¬ æ—¶é—´çº¿ç¤ºä¾‹

```
Day 1:
00:00  ç”¨æˆ·Aè¯„åˆ† â†’ S3 Bronze
01:00  ç”¨æˆ·Bè¯„åˆ† â†’ S3 Bronze
02:00  Airflowè§¦å‘ â† å¼€å§‹è®­ç»ƒ
       â”œâ”€ è¯»å–æ˜¨å¤©çš„æ‰€æœ‰è¯„åˆ†
       â”œâ”€ æ„å»ºæ–°çš„rating_matrix
       â”œâ”€ è®­ç»ƒæ–°æ¨¡å‹ï¼ˆ30åˆ†é’Ÿï¼‰
02:30  â”œâ”€ è¯„ä¼°æ¨¡å‹
       â”œâ”€ éƒ¨ç½²æ¨¡å‹
       â””â”€ è°ƒç”¨/reload
02:31  APIé‡æ–°åŠ è½½å®Œæˆ âœ…
03:00  ç”¨æˆ·Cè¯·æ±‚æ¨è â†’ ä½¿ç”¨æ–°æ¨¡å‹ï¼ˆåŒ…å«Aå’ŒBçš„è¯„åˆ†ï¼‰

Day 2:
02:00  Airflowå†æ¬¡è§¦å‘
       â”œâ”€ åŒ…å«Day 1çš„æ‰€æœ‰æ–°è¯„åˆ†
       â””â”€ è®­ç»ƒæ›´æ–°çš„æ¨¡å‹
02:31  APIé‡æ–°åŠ è½½ âœ…
       â””â”€ æ¨èç»“æœå†æ¬¡æ›´æ–°
```

## ğŸ“Š æ•°æ®æµè½¬å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   åŸå§‹è¯„åˆ†æ•°æ®                       â”‚
â”‚         S3 Bronze / SQLite ratingsè¡¨                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â–¼                     â–¼                     â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  DynamoDB   â”‚      â”‚ S3 Silver   â”‚      â”‚ Airflowè®­ç»ƒ â”‚
    â”‚  (ç»Ÿè®¡ç”¨)   â”‚      â”‚ (åˆ†æç”¨)    â”‚      â”‚  (æ¨¡å‹ç”¨)   â”‚
    â”‚             â”‚      â”‚             â”‚      â”‚             â”‚
    â”‚ avg_rating  â”‚      â”‚ Parquetæ–‡ä»¶ â”‚      â”‚ è¯»å–æ‰€æœ‰    â”‚
    â”‚ rating_countâ”‚      â”‚ ç‰¹å¾æ•°æ®    â”‚      â”‚ è¯„åˆ†æ•°æ®    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                                      â”‚
                                                      â–¼
                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                              â”‚ æ„å»ºçŸ©é˜µ     â”‚
                                              â”‚ rating_matrixâ”‚
                                              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                                     â–¼
                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                              â”‚ è®­ç»ƒæ¨¡å‹     â”‚
                                              â”‚HybridRecommenâ”‚
                                              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                                     â–¼
                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                              â”‚ ä¿å­˜æ¨¡å‹æ–‡ä»¶ â”‚
                                              â”‚.pklæ–‡ä»¶      â”‚
                                              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                                     â–¼
                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                              â”‚ production_  â”‚
                                              â”‚ model.pkl    â”‚
                                              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                              /reloadç«¯ç‚¹
                                                     â”‚
                                                     â–¼
                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                              â”‚ APIåŠ è½½      â”‚
                                              â”‚ recommender  â”‚
                                              â”‚ (å…¨å±€å˜é‡)   â”‚
                                              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                                     â–¼
                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                              â”‚ /recommend   â”‚
                                              â”‚ ç”Ÿæˆæ¨è     â”‚
                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ å…³é”®ç‚¹æ€»ç»“

### 1. æ¨¡å‹åœ¨å“ªé‡Œï¼Ÿ

**ä¸¤ä¸ªä½ç½®**ï¼š

1. **æ–‡ä»¶ç³»ç»Ÿ**: `models/saved_models/production_model.pkl`
   - æŒä¹…åŒ–å­˜å‚¨
   - åŒ…å«å®Œæ•´çš„rating_matrixå’Œé¢„è®¡ç®—ç»“æœ

2. **APIå†…å­˜**: å…¨å±€å˜é‡`recommender`
   - è¿è¡Œæ—¶å¯¹è±¡
   - ä»pklæ–‡ä»¶åŠ è½½è€Œæ¥
   - ç”¨äºå®æ—¶æ¨è

### 2. æ¨¡å‹ä½•æ—¶æ›´æ–°ï¼Ÿ

**ä¸æ˜¯å®æ—¶æ›´æ–°ï¼**

- âŒ ç”¨æˆ·è¯„åˆ†åä¸ä¼šç«‹å³æ›´æ–°
- âœ… Airflowæ¯å¤©å‡Œæ™¨2ç‚¹æ‰¹å¤„ç†æ›´æ–°
- âœ… æ‰‹åŠ¨è°ƒç”¨`POST /reload`ç«‹å³æ›´æ–°

### 3. æ¨èåŸºäºä»€ä¹ˆï¼Ÿ

- âœ… åŸºäºå†…å­˜ä¸­çš„`rating_matrix`
- âœ… åŸºäºé¢„è®¡ç®—çš„ç›¸ä¼¼åº¦çŸ©é˜µ
- âŒ ä¸åŸºäºDynamoDBçš„ç‰¹å¾
- âŒ ä¸åŸºäºS3 Silverçš„ç‰¹å¾

### 4. DynamoDBå’ŒS3 Silverçš„ä½œç”¨ï¼Ÿ

- **DynamoDB**: ç”¨æˆ·ç»Ÿè®¡å±•ç¤ºã€ç›‘æ§ã€åˆ†æ
- **S3 Silver**: æ•°æ®åˆ†æã€æ¨¡å‹è®­ç»ƒçš„æ•°æ®æº
- **éƒ½ä¸ç›´æ¥ç”¨äºæ¨èç”Ÿæˆ**

### 5. å¦‚ä½•è®©æ–°è¯„åˆ†å½±å“æ¨èï¼Ÿ

```python
# æ–¹å¼1: ç­‰å¾…Airflowè‡ªåŠ¨è®­ç»ƒï¼ˆæ¯å¤©ä¸€æ¬¡ï¼‰
# â†’ ç¬¬äºŒå¤©å‡Œæ™¨2:31åï¼Œæ¨èä¼šè‡ªåŠ¨æ›´æ–°

# æ–¹å¼2: æ‰‹åŠ¨è§¦å‘é‡æ–°åŠ è½½ï¼ˆç«‹å³ï¼‰
curl -X POST http://localhost:8082/reload
# â†’ APIç«‹å³ä»æœ€æ–°æ•°æ®é‡å»ºæ¨¡å‹
```

## ğŸš€ æµ‹è¯•æ¨¡å‹æ›´æ–°æµç¨‹

```bash
# 1. å¯åŠ¨æœåŠ¡
./run.sh

# 2. å‘é€ä¸€äº›è¯„åˆ†æ•°æ®
python3 test_producer.py
# é€‰æ‹©é€‰é¡¹1ï¼Œå‘é€100ä¸ªäº‹ä»¶

# 3. æŸ¥çœ‹å½“å‰æ¨è
curl http://localhost:8082/recommend/1
# ç»“æœ: 123,456,789,...

# 4. æ‰‹åŠ¨è®­ç»ƒæ–°æ¨¡å‹
cd model_training
python3 train_model.py

# 5. é‡æ–°åŠ è½½API
curl -X POST http://localhost:8082/reload

# 6. å†æ¬¡æŸ¥çœ‹æ¨èï¼ˆåº”è¯¥ä¸åŒäº†ï¼‰
curl http://localhost:8082/recommend/1
# ç»“æœ: 234,567,890,... (ä¸åŒçš„æ¨è)
```

ç°åœ¨ä½ å®Œå…¨ç†è§£æ¨¡å‹æ›´æ–°æµç¨‹äº†ï¼ğŸ¬


